{"is_source_file": true, "format": "Python", "description": "Source code for FastAPI router handling consultation scheduling, listing, and updating in a healthcare management system.", "external_files": ["src/core/deps", "src/models/user", "src/models/consultation", "src/db/mongo"], "external_methods": ["get_current_user", "require_roles", "UserInDB", "Role", "ConsultationCreate", "ConsultationUpdate", "ConsultationPublic", "ConsultationStatus", "get_db"], "published": ["router"], "classes": [{"name": "ConsultationCreate", "description": "Model for creating a consultation."}, {"name": "ConsultationUpdate", "description": "Model for updating a consultation."}, {"name": "ConsultationPublic", "description": "Model representing public-facing consultation data."}, {"name": "UserInDB", "description": "Database user model with role information."}, {"name": "Role", "description": "Enumeration of user roles (patient, doctor, admin)."}, {"name": "ConsultationStatus", "description": "Enumeration of consultation statuses."}], "methods": [{"name": "schedule_consultation(payload: ConsultationCreate, user: UserInDB = Depends(get_current_user))", "description": "Creates a new consultation entry in the database.", "scope": "", "scopeKind": ""}, {"name": "list_consultations( patient_id: Optional[str] = Query(None), doctor_id: Optional[str] = Query(None), limit: int = Query(50, ge=1, le=200), skip: int = Query(0, ge=0), user: UserInDB = Depends(get_current_user), )", "description": "Retrieves a list of consultations filtered by patient or doctor, with role-based access control.", "scope": "", "scopeKind": ""}, {"name": "update_consultation( consultation_id: str, payload: ConsultationUpdate, user: UserInDB = Depends(require_roles(Role.doctor, Role.admin)), )", "description": "Updates an existing consultation record, restricted to doctor or admin roles.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "ConsultationPublic.model_validate", "db[\"consultations\"].insert_one", "db[\"consultations\"].find_one", "db[\"consultations\"].find", "db[\"patients\"].find_one", "db[\"doctors\"].find_one", "db[\"consultations\"].update_one"], "search-terms": ["consultations", "schedule_consultation", "list_consultations", "update_consultation", "FastAPI", "consultation endpoints", "MongoDB", "doctor role", "patient role", "consultation status"], "state": 2, "file_id": 20, "knowledge_revision": 42, "git_revision": "", "ctags": [{"_type": "tag", "name": "list_consultations", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/consultations.py", "pattern": "/^async def list_consultations($/", "language": "Python", "kind": "function", "signature": "( patient_id: Optional[str] = Query(None), doctor_id: Optional[str] = Query(None), limit: int = Query(50, ge=1, le=200), skip: int = Query(0, ge=0), user: UserInDB = Depends(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/consultations.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "schedule_consultation", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/consultations.py", "pattern": "/^async def schedule_consultation(payload: ConsultationCreate, user: UserInDB = Depends(get_curren/", "language": "Python", "kind": "function", "signature": "(payload: ConsultationCreate, user: UserInDB = Depends(get_current_user))"}, {"_type": "tag", "name": "update_consultation", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/consultations.py", "pattern": "/^async def update_consultation($/", "language": "Python", "kind": "function", "signature": "( consultation_id: str, payload: ConsultationUpdate, user: UserInDB = Depends(require_roles(Role.doctor, Role.admin)), )"}], "hash": "48db8ac87a155c34e5702003392337bb", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/consultations.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"42": ""}]}