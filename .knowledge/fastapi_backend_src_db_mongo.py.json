{"is_source_file": true, "format": "Python", "description": "This file provides database connection management and index setup functions for a MongoDB backend in a FastAPI healthcare management system. It handles initializing, closing, retrieving the database instance, and ensuring critical indexes on collections.", "external_files": ["motor.motor_asyncio", "pymongo", "src.core.config"], "external_methods": ["AsyncIOMotorClient", "AsyncIOMotorDatabase", "ASCENDING", "TEXT"], "published": ["init_mongo", "close_mongo", "get_db", "ensure_critical_indexes"], "classes": [], "methods": [{"name": "None init_mongo()", "description": "Initialize the global MongoDB motor client with configuration URL.", "scope": "", "scopeKind": ""}, {"name": "None close_mongo()", "description": "Close the MongoDB client if it is initialized.", "scope": "", "scopeKind": ""}, {"name": "AsyncIOMotorDatabase get_db()", "description": "Retrieve the application's MongoDB database instance, initializing the client if necessary.", "scope": "", "scopeKind": ""}, {"name": "None ensure_critical_indexes()", "description": "Create necessary indexes on collections to optimize query performance and enforce constraints, idempotently on startup.", "scope": "", "scopeKind": ""}], "calls": ["init_mongo", "get_db", "create_index"], "search-terms": ["MongoDB client", "ensure indexes", "Motor async driver", "healthcare database", "index creation", "fastapi mongo"], "state": 2, "file_id": 8, "knowledge_revision": 18, "git_revision": "", "ctags": [{"_type": "tag", "name": "_client", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/db/mongo.py", "pattern": "/^_client: Optional[AsyncIOMotorClient] = None$/", "language": "Python", "typeref": "typename:Optional[AsyncIOMotorClient]", "kind": "variable"}, {"_type": "tag", "name": "close_mongo", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/db/mongo.py", "pattern": "/^async def close_mongo() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ensure_critical_indexes", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/db/mongo.py", "pattern": "/^async def ensure_critical_indexes() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/db/mongo.py", "pattern": "/^async def get_db() -> AsyncIOMotorDatabase:$/", "language": "Python", "typeref": "typename:AsyncIOMotorDatabase", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_mongo", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/db/mongo.py", "pattern": "/^async def init_mongo() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}], "hash": "4a0d0fb4c7c5e44a4c6955a34bb50f43", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/db/mongo.py", "fields": [{"name": "Optional[AsyncIOMotorClient] _client", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"18": ""}]}