{"is_source_file": true, "format": "Python", "description": "This file defines API routes related to user profile management in a FastAPI application, including fetching current user info, updating user profiles, and listing users with search functionality.", "external_files": ["src.core.deps", "src.models.user", "src.db.mongo"], "external_methods": ["get_current_user", "require_roles", "UserInDB.model_dump", "UserPublic.model_validate", "get_db"], "published": ["router"], "classes": [{"name": "APIRouter", "description": "FastAPI router object used to define API endpoints."}, {"name": "UserInDB", "description": "User model representing internal database user data."}, {"name": "UserPublic", "description": "Model for publicly exposed user profile data."}, {"name": "UserUpdate", "description": "Model for user profile update payloads."}, {"name": "Role", "description": "Enum for user roles, e.g., admin."}], "methods": [{"name": "get_me(user: UserInDB = Depends(get_current_user))", "description": "Endpoint to retrieve the current authenticated user's public profile.", "scope": "", "scopeKind": ""}, {"name": "update_me(payload: UserUpdate, user: UserInDB = Depends(get_current_user))", "description": "Endpoint to update the current user's profile fields.", "scope": "", "scopeKind": ""}, {"name": "list_users( q: Optional[str] = Query(None, description=\"Search term for email or name\"), limit: int = Query(50, ge=1, le=200), skip: int = Query(0, ge=0), _: UserInDB = Depends(require_roles(Role.admin)), )", "description": "Admin endpoint to list/search users with optional query filters.", "scope": "", "scopeKind": ""}], "calls": ["get_db", "UserInDB.model_dump", "UserPublic.model_validate", "db[\"users\"].update_one", "db[\"users\"].find_one", "db[\"users\"].find"], "search-terms": ["FastAPI user routes", "user profile endpoints", "list/search users", "current user profile", "update user profile", "admin user list"], "state": 2, "file_id": 17, "knowledge_revision": 36, "git_revision": "", "ctags": [{"_type": "tag", "name": "get_me", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/users.py", "pattern": "/^async def get_me(user: UserInDB = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user: UserInDB = Depends(get_current_user))"}, {"_type": "tag", "name": "list_users", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/users.py", "pattern": "/^async def list_users($/", "language": "Python", "kind": "function", "signature": "( q: Optional[str] = Query(None, description=\"Search term for email or name\"), limit: int = Query(50, ge=1, le=200), skip: int = Query(0, ge=0), _: UserInDB = Depends(require_roles(Role.admin)), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/users.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_me", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/routers/users.py", "pattern": "/^async def update_me(payload: UserUpdate, user: UserInDB = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(payload: UserUpdate, user: UserInDB = Depends(get_current_user))"}], "hash": "ef02e773e3d2f68d8bbfd6e621e7b907", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/routers/users.py", "fields": [{"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"36": ""}]}