{"is_source_file": true, "format": "Python", "description": "This file contains FastAPI route definitions for managing patient profiles within a healthcare management system. It includes endpoints for retrieving, updating, creating, and listing patient data, with role-based access control and integration with MongoDB via Motor.", "external_files": ["src.api.auth", "src.api.db", "src.api.models"], "external_methods": ["decode_token", "get_db", "convert_object_ids", "to_object_id"], "published": ["get_current_user"], "classes": [{"name": "PaginatedPatients", "description": "Pydantic model for paginated list of patients, including total count"}], "methods": [{"name": "Any get_my_profile( user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )", "description": "Retrieves the profile of the currently authenticated patient.", "scope": "", "scopeKind": ""}, {"name": "Any update_my_profile( payload: PatientUpdate, user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )", "description": "Updates the profile of the currently authenticated patient.", "scope": "", "scopeKind": ""}, {"name": "Any get_patient_by_id( id: str = Path(..., description=\"Patient document id\"), user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )", "description": "Fetches a patient's profile by its database ID, accessible by doctors and admins.", "scope": "", "scopeKind": ""}, {"name": "Any create_patient( payload: PatientCreate, user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )", "description": "Creates a new patient profile, restricted to admin and optionally self-creating patients.", "scope": "", "scopeKind": ""}, {"name": "Any list_patients( user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), skip: int = Query(0, ge=0, description=\"Number of items to skip\"), limit: int = Query(20, ge=1, le=100, description=\"Max items to return\"), )", "description": "Lists patients with pagination, accessible by doctors and admins.", "scope": "", "scopeKind": ""}, {"name": "_patients(db: AsyncIOMotorDatabase)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_users(db: AsyncIOMotorDatabase)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] get_current_user(token: str = Depends(oauth2_scheme))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["decode_token", "get_db", "convert_object_ids", "to_object_id"], "search-terms": ["patients", "FastAPI routes", "MongoDB", "role-based access", "patient profile", "API router"], "state": 2, "file_id": 11, "knowledge_revision": 25, "git_revision": "", "ctags": [{"_type": "tag", "name": "PaginatedPatients", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^class PaginatedPatients(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_patients", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def _patients(db: AsyncIOMotorDatabase):$/", "language": "Python", "kind": "function", "signature": "(db: AsyncIOMotorDatabase)"}, {"_type": "tag", "name": "_users", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def _users(db: AsyncIOMotorDatabase):$/", "language": "Python", "kind": "function", "signature": "(db: AsyncIOMotorDatabase)"}, {"_type": "tag", "name": "create_patient", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def create_patient($/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "( payload: PatientCreate, user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def get_current_user(token: str = Depends(oauth2_scheme)) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(token: str = Depends(oauth2_scheme))"}, {"_type": "tag", "name": "get_my_profile", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def get_my_profile($/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "( user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )"}, {"_type": "tag", "name": "get_patient_by_id", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def get_patient_by_id($/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "( id: str = Path(..., description=\"Patient document id\"), user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^    items: List[PatientOut] = Field(..., description=\"Patients\")$/", "language": "Python", "typeref": "typename:List[PatientOut]", "kind": "variable", "scope": "PaginatedPatients", "scopeKind": "class"}, {"_type": "tag", "name": "list_patients", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def list_patients($/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "( user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), skip: int = Query(0, ge=0, description=\"Number of items to skip\"), limit: int = Query(20, ge=1, le=100, description=\"Max items to return\"), )"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\", scheme_name=\"JWT\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^router = APIRouter($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "total", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^    total: int = Field(..., description=\"Total count\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "PaginatedPatients", "scopeKind": "class"}, {"_type": "tag", "name": "update_my_profile", "path": "/home/kavia/workspace/code-generation/healthcare-management-system-5324-5333/fastapi_backend/src/api/routes/patients.py", "pattern": "/^async def update_my_profile($/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "( payload: PatientUpdate, user: Dict[str, Any] = Depends(get_current_user), db: AsyncIOMotorDatabase = Depends(get_db), )"}], "hash": "6edaf0d4f44462b61e1c6a7e404ad450", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "fastapi_backend/src/api/routes/patients.py", "fields": [{"name": "List[PatientOut] items", "scope": "PaginatedPatients", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\", scheme_name=\"JWT\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "router = APIRouter(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "int total", "scope": "PaginatedPatients", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"25": ""}]}